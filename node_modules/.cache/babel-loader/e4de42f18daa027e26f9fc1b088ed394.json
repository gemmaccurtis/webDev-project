{"ast":null,"code":"var _jsxFileName = \"/Users/gemma_curtis/Documents/UNI/contemp-web-app-solutions/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport theme from \"./config/theme.js\";\nimport { ThemeProvider } from \"styled-components\";\nimport GlobalStyles from \"./config/GlobalStyles\";\nimport Header from \"./Components/Header\";\nimport Loader from \"./Components/Loader\";\nimport { Switch, Route, useLocation, Redirect } from \"react-router-dom\";\nimport Dash from \"./Views/Dash\";\nimport Join from \"./Views/Join\";\nimport Checkin from \"./Views/Checkin\";\nimport Profile from \"./Views/Profile\";\nimport Login from \"./Views/Login\";\nimport useChallenge from \"./services/firebase/useChallenge\";\nimport useAuth from \"./services/firebase/useAuth\";\nimport useCheckin from \"./services/firebase/useCheckin\";\nimport firebase from \"firebase/app\"; // the firbase core lib\n\nimport \"firebase/auth\"; // specific products\n\nimport \"firebase/firestore\";\nimport firebaseConfig from \"./config/firebase\"; // the firebase config we set up ealier\n\nlet initAttemptedRoute = \"/\";\n\nfunction Protected({\n  authenticated,\n  children,\n  ...rest\n}) {\n  initAttemptedRoute = useLocation().pathname;\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: ({\n      location\n    }) => authenticated ? children : React.createElement(Redirect, {\n      to: {\n        pathname: \"/login\",\n        state: {\n          from: location\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }));\n}\n\nfunction RedirectToDash({\n  authenticated,\n  children,\n  ...rest\n}) {\n  return React.createElement(Route, Object.assign({}, rest, {\n    render: ({\n      location\n    }) => !authenticated ? children : React.createElement(Redirect, {\n      to: {\n        pathname: initAttemptedRoute,\n        state: {\n          from: location\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }));\n}\n\nfunction App() {\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  const [menuOpen, setMenuOpen] = useState(false);\n  const location = useLocation();\n  const {\n    isAuthenticated,\n    createEmailUser,\n    signInEmailUser,\n    signInWithProvider,\n    signOut,\n    user,\n    loading\n  } = useAuth(firebase.auth);\n  const {\n    createCheckin,\n    readCheckins,\n    readComments,\n    createComment\n  } = useCheckin(firebase.firestore);\n  const {\n    readChallenges\n  } = useChallenge(firebase.firestore);\n\n  const handleClick = async e => {\n    setMenuOpen(!menuOpen);\n  };\n\n  const handleOuterWrapperClick = e => {\n    setMenuOpen(false);\n  };\n\n  useEffect(() => {\n    setMenuOpen(false);\n  }, [location]);\n\n  if (loading) {\n    return React.createElement(Loader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    style: {\n      overflowX: 'hidden'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, React.createElement(ThemeProvider, {\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, location.pathname !== \"/join\" && location.pathname !== \"/login\" && React.createElement(Header, {\n    onClick: handleClick,\n    signOut: signOut,\n    user: user,\n    open: menuOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), React.createElement(GlobalStyles, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    onClick: handleOuterWrapperClick,\n    style: {\n      width: \"100vw\",\n      horizontalScroll: \"none\",\n      overflowX: \"hidden\",\n      height: \"100vh\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(Protected, {\n    authenticated: isAuthenticated,\n    exact: true,\n    path: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, React.createElement(Dash, {\n    user: user,\n    readComments: readComments,\n    createComment: createComment,\n    readCheckins: readCheckins,\n    readChallenges: readChallenges,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  })), React.createElement(RedirectToDash, {\n    authenticated: isAuthenticated,\n    path: \"/join\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(Join, {\n    signInWithProvider: signInWithProvider,\n    createEmailUser: createEmailUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  })), React.createElement(RedirectToDash, {\n    authenticated: isAuthenticated,\n    path: \"/login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(Login, {\n    signInWithProvider: signInWithProvider,\n    signInEmailUser: signInEmailUser,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  })), React.createElement(Protected, {\n    authenticated: isAuthenticated,\n    path: \"/profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Profile, {\n    user: user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  })), React.createElement(Protected, {\n    authenticated: isAuthenticated,\n    path: \"/checkin\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(Checkin, {\n    createCheckin: createCheckin,\n    user: user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }))))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/gemma_curtis/Documents/UNI/contemp-web-app-solutions/src/App.js"],"names":["React","useState","useEffect","theme","ThemeProvider","GlobalStyles","Header","Loader","Switch","Route","useLocation","Redirect","Dash","Join","Checkin","Profile","Login","useChallenge","useAuth","useCheckin","firebase","firebaseConfig","initAttemptedRoute","Protected","authenticated","children","rest","pathname","location","state","from","RedirectToDash","App","apps","length","initializeApp","menuOpen","setMenuOpen","isAuthenticated","createEmailUser","signInEmailUser","signInWithProvider","signOut","user","loading","auth","createCheckin","readCheckins","readComments","createComment","firestore","readChallenges","handleClick","e","handleOuterWrapperClick","overflowX","width","horizontalScroll","height"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport theme from \"./config/theme.js\";\nimport { ThemeProvider } from \"styled-components\";\nimport GlobalStyles from \"./config/GlobalStyles\";\nimport Header from \"./Components/Header\";\nimport Loader from \"./Components/Loader\";\nimport { Switch, Route, useLocation, Redirect } from \"react-router-dom\";\nimport Dash from \"./Views/Dash\";\nimport Join from \"./Views/Join\";\nimport Checkin from \"./Views/Checkin\";\nimport Profile from \"./Views/Profile\";\nimport Login from \"./Views/Login\";\n\nimport useChallenge from \"./services/firebase/useChallenge\";\nimport useAuth from \"./services/firebase/useAuth\";\nimport useCheckin from \"./services/firebase/useCheckin\"\nimport firebase from \"firebase/app\"; // the firbase core lib\nimport \"firebase/auth\"; // specific products\nimport \"firebase/firestore\";\nimport firebaseConfig from \"./config/firebase\"; // the firebase config we set up ealier\n\n\n\n\n\n \nlet initAttemptedRoute = \"/\"\n\nfunction Protected({ authenticated, children, ...rest }) {\n\n  initAttemptedRoute  = useLocation().pathname;\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        authenticated ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\nfunction RedirectToDash({ authenticated, children, ...rest }) {\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        !authenticated ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: initAttemptedRoute,\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\nfunction App() {\n  if (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n  }\n\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  const location = useLocation();\n  const {\n    isAuthenticated,\n    createEmailUser,\n    signInEmailUser,\n    signInWithProvider,\n    signOut,\n    user,\n    loading\n  } = useAuth(firebase.auth);\n\n  const {\n    createCheckin,\n    readCheckins,\n    readComments,\n    createComment,\n  } = useCheckin(firebase.firestore)\n\n  const {\n    readChallenges \n  } = useChallenge(firebase.firestore);\n\n\n  const handleClick =  async e => {\n    setMenuOpen(!menuOpen);\n  };\n\n  const handleOuterWrapperClick = e => {\n    setMenuOpen(false);\n  };\n\n  useEffect(() => {\n    setMenuOpen(false);\n  }, [location]);\n\n  if (loading ) {\n    return  <Loader />;\n  } \n \n  \n  return (\n\n    <div style={{overflowX: 'hidden'}}>\n      <ThemeProvider theme={theme}>\n        {location.pathname !== \"/join\" && location.pathname !== \"/login\" && (\n          <Header\n            onClick={handleClick}\n            signOut={signOut}\n            user={user}\n            open={menuOpen}\n          />\n        )}\n        <GlobalStyles />\n        <div\n          onClick={handleOuterWrapperClick}\n          style={{\n            width: \"100vw\",\n            horizontalScroll: \"none\",\n            overflowX: \"hidden\",\n            height: \"100vh\"\n          }}\n        >\n          <Switch>\n            <Protected authenticated={isAuthenticated} exact path=\"/\">\n              <Dash user={user} readComments={readComments} createComment={createComment} readCheckins={readCheckins} readChallenges={readChallenges} />\n            </Protected>\n            <RedirectToDash authenticated={isAuthenticated} path=\"/join\">\n              \n            \n            {\n                /**\n                 * I have set up these loaders to handle the social sign-in redirect\n                 * which redirects back to the page you initiated it from\n                 * as such we only want to show the page after the redirect has authenticated\n                 */\n              } \n\n                <Join\n                signInWithProvider={signInWithProvider}\n                createEmailUser={createEmailUser}\n              />\n\n          \n              \n            </RedirectToDash>\n            <RedirectToDash authenticated={isAuthenticated} path=\"/login\">\n                  <Login\n                  signInWithProvider={signInWithProvider}\n                  signInEmailUser={signInEmailUser}\n                />\n            </RedirectToDash>\n            <Protected authenticated={isAuthenticated} path=\"/profile\">\n              <Profile  user={user} />\n            </Protected>\n            <Protected authenticated={isAuthenticated} path=\"/checkin\">\n              <Checkin  createCheckin={createCheckin}  user={user} />\n            </Protected>\n          </Switch>\n        </div>\n      </ThemeProvider>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}